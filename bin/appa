#!/bin/bash

# author: Thato Semoko
# email: thatosmk@gmail.com

# options are either 'new' or 'open'
if [ $1 == "new" ]; then 

	# create a new directory
	mkdir $3

	if [ $2 == "blank" ]; then 
		# copy in a template(main.tex and makefile)
		cp ~/.appa/src/blank/* $3

	elif [ $2 == "science" ]; then 
		# copy in a template(main.tex and makefile)
		cp ~/appa/src/science/* $3

	fi

    cd $3

	# must also indicate whether the required document is a lab 
	# report or just a document like for minutes or something.
	# for reports follow the IMDRC scheme in a tex/intro.tex, 
	# tex/method.tex ... and include that in a main.tex

	# run make for the pdf file 
	make
    # clean the build
	make clean

    # open the pdf file
    xdg-open *.pdf 

    # run the latexmk in a new terminal  
    gnome-terminal -x sh -c "latexmk -pvc -pdf main.tex; zsh"

    # open vi with the tex file
    vi main.tex

elif [ $1 == "open" ]; then 

    # compile
    make && make clean

    # open the pdf file
    xdg-open *.pdf 

    # run the latexmk in a new terminal  
    gnome-terminal -x sh -c "latexmk -pvc -pdf $2; zsh"

    # open vi with the tex file
    vi $2

fi

