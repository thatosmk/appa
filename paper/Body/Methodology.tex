\section{Methodology}
To investigate the speedup attained by partitioning data for multi-threaded applications the following approach was taken. A 9 by 9 median filter will be used. The codes used for the filter is attached to this report.

\subsection{Golden Measure}
A Golden Measure is a solution that is not optimized and may therefore run very slow
however, it ideally produces excellent results. For each pixel the median filter will sort the
values covered by its window and pick the median value. A non-optimized sorting technique,
bubble-sort with a worst-case and average complexity of $O(n^2)$ algorithm, will be used.

The filtering was run 5 times to allow for "cache warm up" before the time taken to filter is recorded. The output image produced was then stored for use as reference.
\begin{Matlab}
void bubbleSort(vector<JSAMPLE> &arr) {
    for (int i = 0; i < arr.size(); i++) {
        for (int j = 1; j < (arr.size() - i); j++) {
            if (arr[j - 1] > arr[j])
				swap(arr[j-1], arr[j]);
        }
    }
}

//---------------------------------------------------------------------
void swap(JSAMPLE &t, JSAMPLE &a) {
    JSAMPLE val = t;
    t = a; 
    a = val;
}
\end{Matlab}
Listing 1.1 the c++ codes for the bubble sort function


\subsection{Multi-Threaded Version}\label{sec: threaded}
In this approach, Pthreads was used. Pthreads is a standardized model that facilitates the 
\textit{divide and conquer} technique for parallel programming [2].
We divide the data such that we only spawn two threads then the 1st
thread works on the top half and the 2nd thread on the bottom half and recursivesly spawn
other two threads for each half array each thread is given. The maximum number of
threads used is always a power of 2 and is less than the height of the image to be
filtered. \\

For sorting the data, the quickSort algorithm was used, the pivot selection and
partitioning steps was done with the Hoare partition scheme\cite{hoare} which performs
well compared to other partition schemes.\\

Similar to the Golden Measure, the filter was run 5 times before recording the total time taken by all the threads to filter the image.

\begin{Matlab}
void quickSort(vector<JSAMPLE> &arr, int lo, int hi) {
    JSAMPLE pivot = arr[lo + (hi - lo) / 2];
    int i = lo, j = hi;
    while (i <= j) {
        while (arr[i] < pivot)//move in from left
            i++;
        while (arr[j] > pivot)//move in from right
            j--;
        if (i <= j) {
            swap(i, j);
            i++;
            j--;
        }
    }
    if (lo < j)quickSort(arr, lo, j);
    if (hi > i)quickSort(arr, i, hi);
}
\end{Matlab}
Listing 1.2 Codes used for the quickSort algorithm
